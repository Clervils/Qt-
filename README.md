# 寻味燕园周边导航应用

这个应用是一个基于 Qt 框架和 Qt Location 模块开发的简单导航应用，旨在帮助用户在寻味燕园周边找到特定地点，并提供相关信息，比如地点描述、类别、评分以及距离周围各个门的距离等。

## 程序功能介绍

1. **地图显示与相关操作**

   地图显示：应用启动后，用户会看到一个地图界面，地图上标记了一些用不同图标来表示的特定地点和北京大学各个出入口的位置。
   地图操作：可以使用鼠标/触碰板对地图进行缩放、旋转、平移等功能。


2. **餐馆地点信息与评分**

   用户可以点击地图上的标记图标，查看地点的详细信息， 可以看到名称、描述、类别、评分和距离，其中评分系统可以通过用户的评分来加权更新地点的评分分数，距离可以从不同出入口的位置观看。

3. **索引设计**

   排行榜功能：显示餐馆排行榜，提供评分分数，距离不同出入口的距离多个排行标准选择，同时可以对餐馆分类排序。
   今天吃什么功能：点击“今天吃什么”按钮，系统将按照用户的类别需求随机挑选餐馆，并提供相应信息。



## 项目各模块与类设计细节

- **MainWindow.qml**: 主界面的 QML 文件，包含地图显示、地点标记和相关交互功能的实现。
  - **地图显示和交互功能**
    - `Plugin`: 导入地图插件，用于显示地图。
    - `Map`: 显示地图，并设置地图中心点和缩放级别。
    - `PinchHandler`: 处理地图的捏放缩放手势，支持手势放大缩小地图。
    - `WheelHandler`: 处理地图的鼠标滚轮放大缩小手势。
    - `DragHandler`: 处理地图的拖拽手势，支持拖拽地图移动视角。
    - `Shortcut`: 快捷键控制地图放大缩小功能。
  - **索引功能与交互**
    - `MapItemView`: 标记特索引点的图标，用于打开索引。
      - `delegate`: 索引图标的代理。
      - `MouseArea`: 处理地点图标的点击事件，并弹出索引详细窗口。
  			-  通过myInference进行交互，交互方式类似locationManager
  - **地点标记和交互**
    - `MapItemView`: 标记特定地点的图标，可以点击查看详细信息。～此处需要补充信息
      - `delegate`: 地点图标的代理，用于创建地点图标和处理点击事件。
      - `MouseArea`: 处理地点图标的点击事件，并弹出地点详细信息窗口。
  			-  与locationManager交互，交互方式见注释
         -  点击创建窗口，窗口具体实现分装在`InfoWindow.qml`文件中
  - **指南针**
    - `Image`: 显示指南针图标，并根据地图旋转角度进行旋转。

- **InfoWindow.qml**: 用于显示地点详细信息的弹出窗口的 QML 文件。
  - **地点详细信息显示**
    - `Rectangle`: 弹出窗口的背景。
    - `ColumnLayout`: 垂直布局，用于显示地点详细信息的各个属性。
      - `Text`: 显示地点名称、描述、类别、评分以及距离各个门的距离等信息。

- **main.cpp**: 应用程序的入口文件，负责创建 `LocationManager` 实例并加载主 QML 文件。

- **LocationManager.h** 和 **LocationManager.cpp**: 定义了 `LocationManager` 类，用于管理地点信息。
  - `addLocation(const QString &name, qreal latitude, qreal longitude, const QString &description, const QString &category, int rating)`: 添加地点信息的函数。～此处需要补充信息
  - `getAllLocations()`: 获取所有地点信息的函数。
  - `getLocationByName(const QString &name)`: 根据名称获取地点信息的函数。
  - `updateLocationRating()`: 用于更新地点评分。

- **Inference.h** 和 **Inference.cpp**: 定义了 `Inference` 类，用于显示索引。
  - `showInference`: 创建Indexes对象并显示。

- **Indexes.h** 和 **Indexes.cpp**: 定义了 `Indexes` 类，用于实现按照分数距离分类排行索引。
  - `initializeData`: 初始化排名 ～此处需要补充信息，完成与LocationManager的交互，实现排名
  - `updateRank`: 更新排名
  - `showDetailedInfo()`:点击图标后显示详细的对应地点的信息。
  - `findNearestGate`:在索引界面中寻找对应出入口的最近门，方便排序

- **rating.h** 和 **rating.cpp**: 定义了 `Ratingwidget` 类，用于实现评分功能。
  - `mousePressEvent()`:实现鼠标点击进行反馈评分
  - `updateRating(int rating)`:实现点击得到反馈评分的更新地点评分

## 小组成员分工情况

**成员 1 陈文浩**:实现了主界面的设计与实现，包括地图显示和交互功能，实现索引界面设计

**成员 2 张智琦**:实现评分更新的过程，排行榜等部分功能设计与实现

**成员 3 高田园**:增添了地点的经纬度，评分，位置等信息，排行榜等部分功能设计与实现

## 项目总结与反思

### 总结

- 该项目通过 Qt 框架和 Qt Location 模块实现了一个简单的导航应用，帮助用户在燕园周边找到特定地点。
- 项目过程中，我们基于用户需要成功地实现了地图显示、地点标记、信息弹窗和索引排行等主要功能，帮助用户进行对北京大学周边地点进行了解和选择。

### 反思

- **性能优化**：
  在开发过程中，我们遇到了地图交互和信息显示的性能问题。由于地图上需要显示大量的标记和信息，初始实现的代码在性能上存在一定的瓶颈。通过优化 QML 代码和改进数据结构，我们成功地提升了应用的响应速度和运行效率。然而，仍有进一步优化的空间，例如在标记大量地点时使用分页加载或按需加载的方式。

- **索引功能复杂性**：
  索引功能的实现较为复杂，尤其是与 LocationManager 类的交互部分。在设计和实现过程中，我们发现需要频繁地从 LocationManager 获取地点信息并进行排序和过滤，增加了代码的复杂性和维护难度。为了提高代码的可读性和可维护性，我们需要进一步优化索引功能的实现。

- **用户体验提升**：
  未来可以增加更多的交互功能和用户自定义选项，提高用户体验。例如，提供路线规划和导航功能、支持用户评论和照片上传等。

- **团队协作与沟通**：
  在项目开发过程中，团队成员之间的协作和沟通至关重要。虽然我们通过定期会议和在线工具进行了沟通，但由于对相关工具使用不够熟悉小组工作展开仍然比较困难。







